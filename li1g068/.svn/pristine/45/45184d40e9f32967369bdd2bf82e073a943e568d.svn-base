<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Main</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Main.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption empty">&nbsp;</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr></table><p class="caption">Main</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Modulo : Main
</p><p>Descri&#231;&#227;o : M&#243;dulo que executa um n&#237;vel do jogo LightBot
</p><p>Este programa recebe um ficheiro correspondente a um n&#237;vel de LightBot e executa todos os seus comandos, imprimindo mensagens de acordo com os objetivos
do jogo.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:Tabuleiro">Tabuleiro</a> = [String]</li><li class="src short"><span class="keyword">type</span> <a href="#t:Posicao">Posicao</a> = String</li><li class="src short"><span class="keyword">type</span> <a href="#t:Comandos">Comandos</a> = String</li><li class="src short"><span class="keyword">type</span> <a href="#t:Lampada">Lampada</a> = (Int, Int)</li><li class="src short"><span class="keyword">type</span> <a href="#t:Nivel">Nivel</a> = Char</li><li class="src short"><span class="keyword">type</span> <a href="#t:Jogadas">Jogadas</a> = Int</li><li class="src short"><a href="#v:outStr">outStr</a> :: [String] -&gt; String</li><li class="src short"><a href="#v:main">main</a> :: IO ()</li><li class="src short"><a href="#v:setUp">setUp</a> :: [String] -&gt; [String]</li><li class="src short"><a href="#v:execCmds">execCmds</a> :: <a href="Main.html#t:Tabuleiro">Tabuleiro</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a> -&gt; <a href="Main.html#t:Comandos">Comandos</a> -&gt; [<a href="Main.html#t:Lampada">Lampada</a>] -&gt; <a href="Main.html#t:Jogadas">Jogadas</a> -&gt; [String]</li><li class="src short"><a href="#v:getLampadas">getLampadas</a> :: <a href="Main.html#t:Tabuleiro">Tabuleiro</a> -&gt; Int -&gt; Int -&gt; [<a href="Main.html#t:Lampada">Lampada</a>]</li><li class="src short"><a href="#v:luz">luz</a> :: <a href="Main.html#t:Posicao">Posicao</a> -&gt; [<a href="Main.html#t:Lampada">Lampada</a>] -&gt; [<a href="Main.html#t:Lampada">Lampada</a>]</li><li class="src short"><a href="#v:doCmd">doCmd</a> :: <a href="Main.html#t:Tabuleiro">Tabuleiro</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a> -&gt; Char -&gt; <a href="Main.html#t:Posicao">Posicao</a></li><li class="src short"><a href="#v:esq">esq</a> :: <a href="Main.html#t:Posicao">Posicao</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a></li><li class="src short"><a href="#v:dir">dir</a> :: <a href="Main.html#t:Posicao">Posicao</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a></li><li class="src short"><a href="#v:avancar">avancar</a> :: <a href="Main.html#t:Tabuleiro">Tabuleiro</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a></li><li class="src short"><a href="#v:saltar">saltar</a> :: <a href="Main.html#t:Tabuleiro">Tabuleiro</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a></li><li class="src short"><a href="#v:getPos">getPos</a> :: <a href="Main.html#t:Tabuleiro">Tabuleiro</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a> -&gt; <a href="Main.html#t:Nivel">Nivel</a></li><li class="src short"><a href="#v:getNext">getNext</a> :: <a href="Main.html#t:Tabuleiro">Tabuleiro</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a> -&gt; (<a href="Main.html#t:Nivel">Nivel</a>, Int, Int)</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Tabuleiro" class="def">Tabuleiro</a> = [String]</p><div class="doc"><p>Tipo usado para representar tabuleiros. Cada linha do tabuleiro &#233; composto por um conjunto de carateres.
</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Posicao" class="def">Posicao</a> = String</p><div class="doc"><p>Tipo usado para representar a posi&#231;&#227;o do Robot. Uma posi&#231;&#227;o v&#225;lida dever&#225; apresentar a seguinte estrutura <em>@x y ori@</em>.
</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Comandos" class="def">Comandos</a> = String</p><div class="doc"><p>Tipo usado para representar uma linha de comandos. Cada comando &#233; associado a um carater.
</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Lampada" class="def">Lampada</a> = (Int, Int)</p><div class="doc"><p>Tipo usado para representar uma l&#226;mpada. A cada l&#226;mpada est&#225; associada a sua posi&#231;&#227;o (x,y) no tabuleiro.
</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Nivel" class="def">Nivel</a> = Char</p><div class="doc"><p>Tipo usado para representar o n&#237;vel de uma dada posi&#231;&#227;o do tabuleiro.
</p></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a name="t:Jogadas" class="def">Jogadas</a> = Int</p><div class="doc"><p>Tipo usado para reprensentar o n&#250;mero de comandos v&#225;lidos executados.
</p></div></div><div class="top"><p class="src"><a name="v:outStr" class="def">outStr</a> :: [String] -&gt; String</p><div class="doc"><p><code><a href="Main.html#v:outStr">outStr</a></code> recebe uma <code>[String]</code> e junta as v&#225;rias <code>String</code>s atrav&#233;s do carater <code>/n</code>, devolvendo uma &#250;nica <code>String</code>.
</p></div></div><div class="top"><p class="src"><a name="v:main" class="def">main</a> :: IO ()</p><div class="doc"><p>A fun&#231;&#227;o <code><a href="Main.html#v:main">main</a></code> l&#234; um ficheiro e inicializa a execu&#231;&#227;o do jogo, imprimindo os resultados. 
</p></div></div><div class="top"><p class="src"><a name="v:setUp" class="def">setUp</a> :: [String] -&gt; [String]</p><div class="doc"><p><code><a href="Main.html#v:setUp">setUp</a></code> prepara o ficheiro recebido e inicializa a execu&#231;&#227;o do n&#237;vel de LightBot. Esta fun&#231;&#227;o devolve o resultado da execu&#231;&#227;o do n&#237;vel.
</p></div></div><div class="top"><p class="src"><a name="v:execCmds" class="def">execCmds</a> :: <a href="Main.html#t:Tabuleiro">Tabuleiro</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a> -&gt; <a href="Main.html#t:Comandos">Comandos</a> -&gt; [<a href="Main.html#t:Lampada">Lampada</a>] -&gt; <a href="Main.html#t:Jogadas">Jogadas</a> -&gt; [String]</p><div class="doc"><p><code><a href="Main.html#v:execCmds">execCmds</a></code> recebe os dados necess&#225;rios para a execu&#231;&#227;o do jogo: <code><a href="Main.html#t:Tabuleiro">Tabuleiro</a></code>, <code><a href="Main.html#t:Posicao">Posicao</a></code>, <code><a href="Main.html#t:Comandos">Comandos</a></code>; e os dados respetivos ao estado 
do jogo: [<code><a href="Main.html#t:Lampada">Lampada</a></code>], <code><a href="Main.html#t:Jogadas">Jogadas</a></code>.
</p><p>Esta fun&#231;&#227;o executa os comandos recebidos e devolve uma String do tipo <code>&quot;(x,y)&quot;</code>  em que (x,y) corresponde &#224; posi&#231;&#227;o da l&#226;mpada no tabuleiro,
 sempre que &#233; acesa/desligada uma l&#226;mpada.
</p><p>A fun&#231;&#227;o termina a sua execu&#231;&#227;o quando se depara com um dos seguintes casos:
</p><ol><li> recebe uma [<code><a href="Main.html#t:Lampada">Lampada</a></code>] vazia e devolve <code>&quot;FIM n&quot;</code>, em que <code>n</code> corresponde ao n&#250;mero de <a href="Jogadas.html">Jogadas</a>.
</li><li> a sequ&#234;nia de comandos terminou e devolve &quot;INCOMPLETO&quot;.
</li></ol><p><em>Observa&#231;&#227;o: os casos est&#227;o listados pela ordem verificada na fun&#231;&#227;o.</em>
</p></div></div><div class="top"><p class="src"><a name="v:getLampadas" class="def">getLampadas</a> :: <a href="Main.html#t:Tabuleiro">Tabuleiro</a> -&gt; Int -&gt; Int -&gt; [<a href="Main.html#t:Lampada">Lampada</a>]</p><div class="doc"><p><code><a href="Main.html#v:getLampadas">getLampadas</a></code> recebe um <code><a href="Main.html#t:Tabuleiro">Tabuleiro</a></code> e dois <code>Int</code> respons&#225;veis por controlar a posi&#231;&#227;o em que a fun&#231;&#227;o vai atuar. Esta fun&#231;&#227;o percorre o tabuleiro,
entrada a entrada, e re&#250;ne as posi&#231;&#245;es de todos as l&#226;mpadas presentes no tabuleiro, devolvendo uma [<code><a href="Main.html#t:Lampada">Lampada</a></code>].
</p></div></div><div class="top"><p class="src"><a name="v:luz" class="def">luz</a> :: <a href="Main.html#t:Posicao">Posicao</a> -&gt; [<a href="Main.html#t:Lampada">Lampada</a>] -&gt; [<a href="Main.html#t:Lampada">Lampada</a>]</p><div class="doc"><p><code><a href="Main.html#v:luz">luz</a></code> verifica se a l&#226;mpada existente na <code><a href="Main.html#t:Posicao">Posicao</a></code> recebida se encontra na [<code><a href="Main.html#t:Lampada">Lampada</a></code>], que cont&#233; a lista de l&#226;mpadas apagadas. Esta fun&#231;&#227;o devolve 
uma [<a href="Lampada.html">Lampada</a>] em que:
</p><ul><li>caso a l&#226;mpada n&#227;o perten&#231;a &#224; lista &#233; devolvido uma lista com a l&#226;mpada.
</li><li>caso a l&#226;mpada perten&#231;a &#224; lista &#233; devolvido uma lista sem a l&#226;mpada.
</li></ul></div></div><div class="top"><p class="src"><a name="v:doCmd" class="def">doCmd</a> :: <a href="Main.html#t:Tabuleiro">Tabuleiro</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a> -&gt; Char -&gt; <a href="Main.html#t:Posicao">Posicao</a></p><div class="doc"><p><code><a href="Main.html#v:doCmd">doCmd</a></code> recebe os dados necess&#225;rios &#224; execu&#231;&#227;o do comando, <code><a href="Main.html#t:Tabuleiro">Tabuleiro</a></code> e <code><a href="Main.html#t:Posicao">Posicao</a></code>, o comando, e devolve a posi&#231;&#227;o originada pela execu&#231;&#227;o do comando 
 recebido.
</p></div></div><div class="top"><p class="src"><a name="v:esq" class="def">esq</a> :: <a href="Main.html#t:Posicao">Posicao</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a></p><div class="doc"><p><code><a href="Main.html#v:esq">esq</a></code> recebe uma <code><a href="Main.html#t:Posicao">Posicao</a></code> e devolve como resultado uma nova <code><a href="Main.html#t:Posicao">Posicao</a></code> na qual a orienta&#231;&#227;o assumida pelo Robot &#233; girada 90&#186; para a esquerda de acordo com os pontos cardeais.
</p></div></div><div class="top"><p class="src"><a name="v:dir" class="def">dir</a> :: <a href="Main.html#t:Posicao">Posicao</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a></p><div class="doc"><p><code><a href="Main.html#v:dir">dir</a></code> recebe uma <a href="Posicao.html">Posicao</a> e devolve uma nova <a href="Posicao.html">Posicao</a> na qual a orienta&#231;&#227;o assumida pelo Robot &#233; girada 90&#186; para a direita de acordo com os pontos cardeais.
</p></div></div><div class="top"><p class="src"><a name="v:avancar" class="def">avancar</a> :: <a href="Main.html#t:Tabuleiro">Tabuleiro</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a></p><div class="doc"><p><code><a href="Main.html#v:avancar">avancar</a></code> recebe um <code><a href="Main.html#t:Tabuleiro">Tabuleiro</a></code> e uma <code><a href="Main.html#t:Posicao">Posicao</a></code> e devolve a nova <code><a href="Main.html#t:Posicao">Posicao</a></code> assumida pelo Robot ap&#243;s este avan&#231;ar no tabuleiro de acordo com a sua
orienta&#231;&#227;o.
</p><p>Para que a execu&#231;&#227;o do comando <code><a href="Main.html#v:avancar">avancar</a></code> seja uma a&#231;&#227;o v&#225;lida as seguintes condi&#231;&#245;es devem ser cumpridas:
</p><ul><li> a nova posi&#231;&#227;o deve continuar dentro dos limites do tabuleiro;
</li><li> a posi&#231;&#227;o dada e a nova posi&#231;&#227;o devem estar no mesmo n&#237;vel;
</li></ul><p>Caso uma destas condi&#231;&#245;es n&#227;o seja cumprida &#233; devolvido <code>[]</code>.
</p></div></div><div class="top"><p class="src"><a name="v:saltar" class="def">saltar</a> :: <a href="Main.html#t:Tabuleiro">Tabuleiro</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a></p><div class="doc"><p><code><a href="Main.html#v:saltar">saltar</a></code> recebe um <code><a href="Main.html#t:Tabuleiro">Tabuleiro</a></code> e uma <code><a href="Main.html#t:Posicao">Posicao</a></code> e devolve a nova <code><a href="Main.html#t:Posicao">Posicao</a></code> assumida pelo Robot ap&#243;s este saltar no tabuleiro de acordo com a sua
orienta&#231;&#227;o.
</p><p>Para que a execu&#231;&#227;o do comando <code><a href="Main.html#v:saltar">saltar</a></code> seja uma a&#231;&#227;o v&#225;lida as seguintes condi&#231;&#245;es devem ser cumpridas:
</p><ul><li> a nova posi&#231;&#227;o deve continuar dentro dos limites do tabuleiro;
</li><li> a nova posi&#231;&#227;o deve ser um n&#237;vel superior &#224; posi&#231;&#227;o dada OU a nova posi&#231;&#227;o deve ser inferior &#224; posi&#231;&#227;o dada;
</li></ul><p>Caso uma destas condi&#231;&#245;es n&#227;o seja cumprida &#233; devolvida <code>[]</code>.
</p></div></div><div class="top"><p class="src"><a name="v:getPos" class="def">getPos</a> :: <a href="Main.html#t:Tabuleiro">Tabuleiro</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a> -&gt; <a href="Main.html#t:Nivel">Nivel</a></p><div class="doc"><p><code><a href="Main.html#v:getPos">getPos</a></code> recebe um <code><a href="Main.html#t:Tabuleiro">Tabuleiro</a></code> e uma <code><a href="Main.html#t:Posicao">Posicao</a></code> e devolve como resultado o <code><a href="Main.html#t:Nivel">Nivel</a></code> da posi&#231;&#227;o em que o robot se encontra no tabuleiro.
</p></div></div><div class="top"><p class="src"><a name="v:getNext" class="def">getNext</a> :: <a href="Main.html#t:Tabuleiro">Tabuleiro</a> -&gt; <a href="Main.html#t:Posicao">Posicao</a> -&gt; (<a href="Main.html#t:Nivel">Nivel</a>, Int, Int)</p><div class="doc"><p><code><a href="Main.html#v:getNext">getNext</a></code> recebe um <code><a href="Main.html#t:Tabuleiro">Tabuleiro</a></code> e uma <code><a href="Main.html#t:Posicao">Posicao</a></code> e devolve todos os dados da posi&#231;&#227;o seguinte, <code>(<code><a href="Main.html#t:Nivel">Nivel</a></code>,Int,Int)</code>. Estes dados correspondem a:
</p><ul><li> n&#237;vel da posi&#231;&#227;o seguinte;
</li><li> abcissa da posi&#231;&#227;o seguinte;
</li><li> ordenada da posi&#231;&#227;o seguinte.
</li></ul><p>Caso a posi&#231;&#227;o seguinte n&#227;o esteja dentro dos limites do tabuleiro &#233; devolvido como resultado (' ',-1,-1).
</p><p><em>Observa&#231;&#227;o: A posi&#231;&#227;o seguinte &#233; calculada de acordo com a orienta&#231;&#227;o do Robot.</em> 
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>